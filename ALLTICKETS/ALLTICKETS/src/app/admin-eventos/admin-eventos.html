<h2>Administrar Eventos</h2>



<table>
  <thead>
    <tr><th>Título</th><th>Fecha</th><th>Hora</th><th>Modo Venta</th><th>Imagen</th><th>Acciones</th></tr>
  </thead>
  <tbody>
    <tr *ngFor="let ev of eventos">
      <td>{{ ev.titulo }}</td>
      <td>{{ ev.fecha }}</td>
      <td>{{ ev.hora}}</td>
      <td>{{ ev.modoVenta }}</td>
      <td>{{ev.imagen}}</td>
      <td>
        <button (click)="seleccionarEvento(ev)">Editar</button>
        <button (click)="eliminarEvento(ev.id)">Eliminar</button>
      </td>
    </tr>
  </tbody>
</table>

<form #formEvento="ngForm" (ngSubmit)="guardarEvento(formEvento)" class="formulario-evento">
  <h3>{{ modoEdicion ? 'Editar Evento' : 'Crear Evento' }}</h3>

  <label>Título:</label>
  <input [(ngModel)]="nuevoEvento.titulo" name="titulo" required />

  <label>Fecha:</label>
  <input [(ngModel)]="nuevoEvento.fecha" name="fecha" type="date" required />

    <label>Hora:</label>
    <input [(ngModel)]="nuevoEvento.hora" name="hora" type="time" required />

    <label>Imagen (URL):</label>
    <input [(ngModel)]="nuevoEvento.imagen" name="imagen" type="text" required />

  <label>Modo de Venta:</label>
  <select [(ngModel)]="nuevoEvento.modoVenta" name="modoVenta" (change)="cambiarModoVenta()" required>
    <option value="sector">Venta por Sector</option>
    <option value="butaca">Venta por Butaca</option>
  </select>

  <div *ngIf="nuevoEvento.modoVenta === 'sector'">
    <h4>Sectores</h4>
    <button type="button" (click)="agregarSector()">Agregar Sector</button>
    <div *ngFor="let s of nuevoEvento.sectores; let i = index">
      <label>Nombre:</label>
      <input [(ngModel)]="s.nombre" name="s_nombre_{{i}}" required />
      <label>Capacidad:</label>
      <input [(ngModel)]="s.capacidad" name="s_capacidad_{{i}}" type="number" required />
      <label>Precio:</label>
      <input [(ngModel)]="s.precio" name="s_precio_{{i}}" type="number" required />
    </div>
  </div>

  <div *ngIf="nuevoEvento.modoVenta === 'butaca'">
    <h4>Butacas</h4>
    <button type="button" (click)="agregarButaca()">Agregar Butaca</button>
    <div *ngFor="let b of nuevoEvento.butacas; let j = index">
      <label>Fila:</label>
      <input [(ngModel)]="b.fila" name="b_fila_{{j}}" required />
      <label>Número:</label>
      <input [(ngModel)]="b.numero" name="b_numero_{{j}}" type="number" required />
      <label>Precio:</label>
      <input [(ngModel)]="b.precio" name="b_precio_{{j}}" type="number" required />
      <label>Disponible:</label>
      <input [(ngModel)]="b.disponible" name="b_disp_{{j}}" type="checkbox" />
    </div>
  </div>

  <button type="submit">Guardar Evento</button>
</form>

<button routerLink="">Volver</button>