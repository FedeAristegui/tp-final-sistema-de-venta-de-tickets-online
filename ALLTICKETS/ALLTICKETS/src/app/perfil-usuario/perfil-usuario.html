<div class="perfil-container">
  
  <div class="header">
    <h1>üßçüèª‚Äç‚ôÇÔ∏è Mi Perfil</h1>
    <p>Bienvenido a tu perfil personal. Aqu√≠ puedes ver y editar tu informaci√≥n</p>
  </div>  

  @if (mensaje) {
    <div class="mensaje">{{ mensaje }}</div>
  }


  @if (usuario) {
    
    <div class="perfil-card">
      
    @if (!editando) {

      <div class="campo">
        <strong>Nombre:</strong> {{ usuario.nombre }} {{ usuario.apellido }}
      </div>
      <div class="campo">
        <strong>Email:</strong> {{ usuario.email }}
      </div>
      <div class="campo">
        <strong>Fecha de Registro:</strong> {{ usuario.fechaRegistro | date: 'dd/MM/yyyy' }}
      </div>
      <div class="campo">
        <strong>√öltima Actividad:</strong> {{ usuario.ultimaActividad | date: 'dd/MM/yyyy HH:mm' }}
      </div>
      
      <button (click)="activarEdicion()" class="btn-editar">Editar Perfil</button>
    }

    @if (editando) {
      <div class="formulario-edicion">
      <form [formGroup]="perfilForm">
        <div class="form-group">
          <label>Nombre:</label>
          <input type="text" formControlName="nombre" class="form-control">
          @if (perfilForm.get('nombre')?.invalid && perfilForm.get('nombre')?.touched) {
            <small class="error">M√≠nimo 3 caracteres</small>
          }
        </div>
        <div class="form-group">
          <label>Apellido:</label>
          <input type="text" formControlName="apellido" class="form-control">
          @if (perfilForm.get('apellido')?.invalid && perfilForm.get('apellido')?.touched) {
            <small class="error">M√≠nimo 3 caracteres</small>
          }
        </div>
        <div class="form-group">
          <label>Email:</label>
          <input type="email" formControlName="email" class="form-control">
          @if (perfilForm.get('email')?.invalid && perfilForm.get('email')?.touched) {
            <small class="error">Email v√°lido requerido</small>
          }
        </div>
        
        <div class="botones">
          <button type="button" (click)="guardarCambios()" class="btn-guardar">Guardar Cambios</button>
          <button type="button" (click)="cancelarEdicion()" class="btn-cancelar">Cancelar</button>
        </div>
      </form>
      </div>
    }
    </div>
  }
</div>